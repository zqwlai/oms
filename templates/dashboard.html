{%  extends 'base.html' %}


{% block content %}
{% load key %}
        <div class="row">
                        <div class="col-sm-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <span class="label label-success pull-right">Clusters</span>
                                    <h5>集群总数</h5></div>
                                <div class="ibox-content">
                                    <h1 class="no-margins">
                                        <a href="#">{{cluster_count}}</a></h1>
                                    <small>All Cluters</small></div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <span class="label label-info pull-right">Hosts</span>
                                    <h5>主机总数</h5></div>
                                <div class="ibox-content">
                                    <h1 class="no-margins">
                                        <a href="#">{{host_count}}</a></h1>
                                    <small>All hosts</small></div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <span class="label label-primary pull-right">Services</span>
                                    <h5>服务总数</h5></div>
                                <div class="ibox-content">
                                    <h1 class="no-margins">
                                        <a href="#">
                                            <span id="online_users"></span>{{service_count}}</a>
                                    </h1>
                                    <small>Services</small></div>
                            </div>
                        </div>

                    </div>



        <div class="row">
            <div class="col-lg-6">
                    <div class="ibox ">
                        <div class="ibox-title">
                            <h5>集群可用性</h5>
                        </div>
                        <div class="ibox-content">
                            <div id="cluster_status" class="ct-perfect-fourth"></div>
                        </div>
                    </div>
                </div>


        </div>









{% endblock %}


{% block  script %}

<script>

    var chart = Highcharts.chart('cluster_status', {
    chart: {
        inverted: true,
        polar: false
    },
    credits: {
        enabled:false // 禁用版权信息
    },
	title: {
		text: '各集群可用性'
	},
	subtitle: {
		text: null
	},
	xAxis: {
		categories: {{cluster_list|safe}}
	},
	yAxis: {
	    max:100,
	    title: {
			text: '可用性(%)'
		}
	},
	tooltip: {
		pointFormat: '可用性: <b>{point.y:.1f}%</b>'
	},
	series: [{
		type: 'column',
		colorByPoint: true,
		data: {{success_rate_list}},
		showInLegend: false
	}]
});
</script>
{% endblock %}
